name: Invitation

on:
  issues:
    types: [labeled]

permissions:
  issues: write

jobs:
  automate_invite:
    runs-on: ubuntu-latest
    steps:
      - name: Check GitHub CLI version
        run: gh --version
        
      - name: Invite to GitHub organization
        uses: vj-abigo/invite-on-label@v1.2
        with:
          organization: LPU-Org
          label: invite me to LPU Org
          repo-token: ${{ secrets.REPO_TOKEN }}
        env:
          INVITE_TOKEN: ${{ secrets.INV_TOKEN }}

      - name: Post invitation comment as bot
        run: |
          gh issue comment ${{ github.event.issue.number }} --repo LPU-Org/.github --body "<b>Invitation sent to join the GitHub Organization. Welcome to the community ðŸŽ‰</b><br><br>Don't forget after accepting to make it public so it appears on your GitHub profile for everyone else to see. You can do this by finding your name in the GitHub organisation list and changing the dropdown to public https://github.com/orgs/LPU-Org/people"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKENÂ }} 
